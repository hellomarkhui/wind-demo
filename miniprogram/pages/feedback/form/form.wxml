<!--pages/feedback/form/form.wxml-->
<form class="box" bindsubmit="formSubmit">
  <view class="cu-form-group flex solid-bottom padding justify-center text-xl margin-top">
    <view class="content text-bold">需求问题申报单</view>
  </view>
  <view class="cu-form-group">
    <view class="title">需求类型:</view>
    <picker name="type" bindchange="typeChange" value="{{typeIndex}}" range="{{type}}">
      <view class="picker">
        {{typeIndex?type[typeIndex]:'请选择'}}
      </view>
    </picker>
  </view>
  <view class="cu-form-group">
    <view class="title">风电场名称:</view>
    <input placeholder="请填写风电场名称" name="name" ></input>
  </view>
  <view class="cu-form-group align-start">
    <view class="title">描述:</view>
    <textarea maxlength="-1" name="describe" placeholder="请填写描述"></textarea>
  </view>
  <view class="cu-form-group">
    <view class="title">附件上传:</view>
  </view>
  <van-uploader file-list="{{ fileList }}" multiple="true" max-count="{{9}}" accept="file" upload-icon="add" bind:after-read="fileRead" bind:delete="fileDelete" />
  <view class="cu-form-group">
    <view class="title">图片上传:</view>
  </view>
  <van-uploader file-list="{{ imageList }}" multiple="true" max-count="{{9}}" bind:after-read="imageRead" bind:delete="imageDelete" />
  <view class="cu-form-group">
    <view class="title">录音列表：</view>
    <view class="action">
      <button class="cu-btn round bg-green" catchtap="addVoice">添加</button>
    </view>
  </view>
  <view class="cu-list menu sm-border">
    <view wx:if="{{voice_list.length}}" class="cu-item" wx:for="{{voice_list}}" wx:for-item="voice">
      <view class="content">
        <text class="text-grey">{{index}}、录音时长：{{voice.time}}</text>
      </view>
      <view class="action">
        <button class="cu-btn round bg-red" data-index="{{index}}" catchtap="deleteVoice">删除</button>
        <button class="cu-btn round bg-red" data-path="{{voice.path}}" data-recordtime="{{voice.recordTime}}" catchtap="playVoice">播放</button>
      </view>
    </view>
    <view class="cu-item" wx:if="{{!voice_list.length}}">
      <view class="content">
        <text class="text-grey">未上传录音</text>
      </view>
    </view>
  </view>

  <view class="cu-form-group">
    <view class="title">主机厂家:</view>
    <input placeholder="请填写主厂家" name="factory"></input>
  </view>
  <view class="cu-form-group">
    <view class="title">行业:</view>
    <input placeholder="请填写行业" name="industry"></input>
  </view>
  <view class="cu-form-group flex solid-bottom padding justify-center">
    <button class="cu-btn bg-red lg" form-type="submit">提交</button>
  </view>

</form>
